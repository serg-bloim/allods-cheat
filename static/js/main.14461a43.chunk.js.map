{"version":3,"sources":["OrderEditor.js","Orders.js","TCUtilization.js","index.js"],"names":["OrderEditor","ps","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleCreateNew","ord","assign","props","order","isNew","id","onChange","state","handleChange","bind","assertThisInitialized","event","propName","defineProperty","target","value","_this2","react_default","a","createElement","index_es","container","spacing","item","xs","label","style","margin","e","setState","fullWidth","InputProps","url","InputLabelProps","shrink","type","cnt","variant","color","className","onClick","onUpdate","onDelete","React","Component","OrdersUI","updateOrders","fetch","then","r","json","orders","Promise","resolve","handleEditorChange","ord2","modified","selected","handleEditorUpdate","method","body","JSON","stringify","headers","Headers","Content-Type","handleOrderDelete","index","findIndex","ords","length","render","map","key","clickHandler","primary","secondary","src_OrderEditor","console","log","TCUtilization","border","tcs","tc","progress","Math","round","prodProgress","addr","width","aria-valuenow","aria-valuemax","align","queue","App2","src_TCUtilization","abc","setInterval","rootElement","document","getElementById","ReactDOM","src_App2"],"mappings":"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","file":"static/js/main.14461a43.chunk.js","sourcesContent":["import React from \"react\";\nimport { Grid, TextField, Button } from \"@material-ui/core\";\nimport { defaultTo } from 'lodash-es';\nimport './orders.css'\n\nclass OrderEditor extends React.Component {\n  constructor(ps) {\n    super(ps);\n    this.state = {};\n    this.handleChange.bind(this);\n  }\n  handleChange(event, propName) {\n    var ord = Object.assign({}, this.props.order, { [propName]: event.target.value })\n    this.props.onChange(ord);\n  }\n  handleCreateNew = () => {\n    var ord = Object.assign({}, this.props.order, { isNew: true, id: '' });\n    this.props.onChange(ord);\n  }\n  render() {\n    return (\n      <Grid container spacing={24}>\n        <Grid item xs={12}>\n          <TextField\n            id=\"uuid\"\n            label=\"ID\"\n            style={{ margin: 8 }}\n            margin=\"normal\"\n            value={this.props.order.id}\n            onChange={e => { this.setState({ order: { id: e.target.value } }); }}\n            fullWidth\n            InputProps={{\n              // readOnly: true,\n            }}\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <TextField\n            id=\"url\"\n            label=\"Endpoint\"\n            style={{ margin: 8 }}\n            // placeholder=\"http://\"\n            value={this.props.order.url}\n            fullWidth\n            onChange={e => this.handleChange(e, \"url\")}\n            margin=\"normal\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n          />\n        </Grid>\n        <Grid item xs={3}>\n          <TextField\n            id=\"amount\"\n            label=\"Amount\"\n            propName=\"cnt\"\n            style={{ margin: 8 }}\n            type=\"number\"\n            // style={{ width: 100 }}\n            value={this.props.order.cnt}\n            fullWidth\n            onChange={e => this.handleChange(e, \"cnt\")}\n            margin=\"normal\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n          />\n        </Grid>\n        <Grid item xs={4}>\n        </Grid>\n        <Grid item xs={2}>\n          {!this.props.order.isNew && <Button\n            variant=\"contained\"\n            color=\"primary\"\n            className=\"update-button\"\n            onClick={this.handleCreateNew}>Create New</Button>}\n\n        </Grid>\n        <Grid item xs={1.5}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={this.props.onUpdate}\n            className={this.props.order.isNew ? \"create-button\" : \"update-button\"}\n          >\n            {this.props.order.isNew ? 'Create' : 'Update'}\n          </Button>\n        </Grid>\n        <Grid item xs={1.5}>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            // className=\"update-button\"\n            onClick={this.props.onDelete}\n          >Delete</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default OrderEditor;","import React from \"react\";\nimport { List, ListItemText, Grid, TextField, Button, withStyles } from '@material-ui/core';\nimport { ListItem } from '@material-ui/core';\nimport OrderEditor from \"./OrderEditor\";\nimport { defaultTo, findIndex } from 'lodash-es'\n\nclass OrdersUI extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: {\n        id: '',\n        url: '',\n        cnt: 0\n      },\n      orders: []\n    };\n    this.updateOrders();\n  }\n  updateOrders = () => {\n    return fetch(\"/orders\")\n      .then(r => r.json())\n      .then(json => {\n        this.setState({ orders: json });\n        return Promise.resolve(json);\n      });\n  }\n\n  clickHandler(e, order) {\n    this.setState({ selected: order });\n    console.log(order);\n    console.log(\"click\");\n  }\n  handleEditorChange = (ord) => {\n    var ord2 = Object.assign({}, ord, { modified: true });\n    this.setState({ selected: ord2 });\n  }\n\n  handleEditorUpdate = () => {\n    var ord = this.state.selected;\n    var method = ord.isNew ? 'POST' : 'PUT';\n    var url = ord.isNew ? '/orders' : '/orders/' + ord.id;\n    fetch(url, {\n      method: method,\n      body: JSON.stringify(ord),\n      headers: new Headers({\n        'Content-Type': 'application/json'\n      }),\n    }).then(r => {\n      this.updateOrders();\n      return r.json();\n    }).then(ord => {\n      this.setState({ selected: ord });\n    });\n  }\n  handleCreateNew = () => {\n    this.setState(\n      {\n        selected: Object.assign({}, this.state.selected, { isNew: true, id: '' })\n      }\n    );\n  }\n\n  handleOrderDelete = () => {\n    var id = this.state.selected.id;\n    if (id) {\n      var index = findIndex(this.state.orders, e => e.id === id);\n      const url = \"/orders/\" + id;\n      fetch(url, {\n        method: 'DELETE',\n      }).then(r => {\n        return this.updateOrders();\n      }).then(ords => {\n        if (ords.length > 0) {\n          if (index >= ords.length) {\n            index = ords.length - 1;\n          }\n          this.setState({ selected: ords[index] });\n        }\n      });\n    }\n  }\n  render = () => {\n    return (\n      <div>\n        <Grid container>\n          <Grid item xs={6}>\n            <List>\n              {\n                this.state.orders.map(ord => {\n                  return (\n                    <ListItem\n                      key={ord.id}\n                      selected={this.state.selected.id === ord.id}\n                      onClick={e => this.clickHandler(e, ord)}>\n                      <ListItemText primary={ord.id} secondary={ord.cnt + \" x \" + ord.url} />\n                    </ListItem>\n                  )\n                })\n              }\n            </List>\n          </Grid>\n          <Grid item xs={6}>\n            <OrderEditor order={this.state.selected}\n              isNew={this.state.selected.isNew}\n              onChange={this.handleEditorChange}\n              onUpdate={this.handleEditorUpdate}\n              onDelete={this.handleOrderDelete}\n            />\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\nexport default OrdersUI;\n","import React from \"react\";\n\nclass TCUtilization extends React.Component {\n    render = () => {\n        console.log(\"render\");\n        console.log(this.props)\n        return (\n            <table border={1}><tbody>\n                {this.props.tcs.map((tc => {\n                    var progress = Math.round(tc.prodProgress * 100);\n                    return <tr><td>{tc.addr}</td>\n                        <td width={300}><div className={\".progress\"} >\n                            <div\n                                className={\"progress-bar\"}\n                                style={{ width: progress + \"%\" }}\n                                aria-valuenow={progress}\n                                aria-valuemax={100}\n\n                            >{progress + \" %\"}</div></div></td>\n                        <td align={\"left\"}>{JSON.stringify(tc.queue)}</td>\n                    </tr>\n                }\n                ))}\n            </tbody>\n            </table>\n        )\n    }\n}\n\nexport default TCUtilization","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport OrdersUI from \"./Orders\";\nimport TCUtilization from './TCUtilization'\n\nimport \"./styles.css\";\nimport 'bootstrap/dist/css/bootstrap.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { abc: [] };\n    fetch(\"/orders\")\n      .then(r => { return r.json() })\n      .then(json => {\n        console.log(json);\n        this.setState({ abc: json });\n      });\n    // setTimeout(()=>{\n    //   this.setState({ abc: [1, 2, 3, 4, 5] });\n    // },1000)\n  }\n  render = () => {\n    return (\n      <div className=\"App\">\n        <OrdersUI orders={this.state.abc.map(e => ({ id: e }))} />\n        {/* <OrdersUI orders={[1, 2, 3, 4].map(e => ({ id: e }))} /> */}\n      </div>\n    );\n  }\n}\nclass App2 extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { abc: [], tcs: [] };\n    setInterval(() => {\n      fetch(\"/game\")\n        .then(r => { return r.json() })\n        .then(json => {\n          console.log(json);\n          this.setState(json);\n        })\n    }, 300);\n\n  }\n  render = () => {\n    return (\n      <div className=\"App\">\n        <TCUtilization tcs={this.state.tcs} />\n      </div>\n    );\n  }\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App2 />, rootElement);\n"],"sourceRoot":""}